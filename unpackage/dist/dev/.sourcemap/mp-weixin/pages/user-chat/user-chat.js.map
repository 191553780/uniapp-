{"version":3,"sources":["webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?ed4d","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?92d0","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?b271","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?5af4","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue"],"names":["data","scrollTop","style","contentHeight","itemHeight","list","components","userChatBottom","userChatList","onLoad","getData","initData","onReady","pageToBottom","methods","res","uni","getSystemInfoSync","windowHeight","upx2px","e","q","createSelectorQuery","select","boundingClientRect","selectAll","exec","console","log","forEach","item","height","arr","isMe","userpic","type","time","i","len","length","gstime","gettime","getChatTime","submit","text","now","Date","getTime","obj","push","$nextTick"],"mappings":"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","file":"pages/user-chat/user-chat.js","sourcesContent":["import { render, staticRenderFns } from \"./user-chat.vue?vue&type=template&id=baf8cc18&scoped=true&\"\nimport script from \"./user-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./user-chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"baf8cc18\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('baf8cc18', component.options)\n    } else {\n      api.reload('baf8cc18', component.options)\n    }\n    module.hot.accept(\"./user-chat.vue?vue&type=template&id=baf8cc18&scoped=true&\", function () {\n      api.rerender('baf8cc18', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=template&id=baf8cc18&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport userChatBottom from '@/components/user-chat/user-chat-bottom.vue'\r\nimport userChatList from '@/components/user-chat/user-chat-list.vue'\r\nimport time from '@/common/time.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tscrollTop: 0,\r\n\t\t\tstyle: {\r\n\t\t\t\tcontentHeight: 0,\r\n\t\t\t\titemHeight: 0\r\n\t\t\t},\r\n\t\t\tlist: [],\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tuserChatBottom,\r\n\t\tuserChatList\r\n\t},\r\n\tonLoad () {\r\n\t\tthis.getData()\r\n\t\tthis.initData()\r\n\t},\r\n\tonReady() {\r\n\t\tthis.pageToBottom()\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化参数\r\n\t\tinitData () {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = uni.getSystemInfoSync();\r\n\t\t\t\tthis.style.contentHeight = res.windowHeight - uni.upx2px(120)\r\n\t\t\t} catch (e) {}\r\n\t\t},\r\n\t\tpageToBottom () {\r\n\t\t\tlet q = uni.createSelectorQuery()\r\n\t\t\tq.select('#scroll-view').boundingClientRect()\r\n\t\t\tq.selectAll('.user-chat').boundingClientRect()\r\n\t\t\tq.exec((res) => {\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tres[1].forEach((item) => {\r\n\t\t\t\t\tthis.style.itemHeight += item.height\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\tif (this.style.itemHeight > this.style.contentHeight) {\r\n\t\t\t\t\tthis.scrollTop = this.style.itemHeight\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 获取聊天数据\r\n\t\tgetData () {\r\n\t\t\tlet arr = [\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: false,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tdata: '啦啦啦',\r\n\t\t\t\t\ttime: 1565161994\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: true,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/20.jpg',\r\n\t\t\t\t\ttype: 'img',\r\n\t\t\t\t\tdata: '../../static/demo/datapic/29.jpg',\r\n\t\t\t\t\ttime: 1565162000\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\t\r\n\t\t\tfor(let i=0,len = arr.length;i<len;i++){\r\n\t\t\t\tarr[i].gstime = time.gettime.getChatTime(arr[i].time,i>0 ? arr[i-1].time : 0)\r\n\t\t\t}\r\n\t\t\tthis.list = arr\r\n\t\t},\r\n\t\tsubmit (text) {\r\n\t\t\t// 构建数据\r\n\t\t\tlet now = new Date().getTime()\r\n\t\t\tlet obj = {\r\n\t\t\t\tisMe: true,\r\n\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdata: text,\r\n\t\t\t\ttime: now,\r\n\t\t\t\tgstime: time.gettime.getChatTime(now,this.list[this.list.length-1].time),\r\n\t\t\t}\r\n\t\t\tthis.list.push(obj)\r\n\t\t\tthis.$nextTick(function(){\r\n\t\t\t\tthis.pageToBottom()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":""}