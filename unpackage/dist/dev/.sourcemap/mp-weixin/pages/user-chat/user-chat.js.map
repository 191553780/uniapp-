{"version":3,"sources":["webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?ed4d","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?92d0","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?b271","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue?5af4","webpack:///D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue"],"names":["data","scrollTop","style","contentHeight","itemHeight","childElements","list","components","userChatBottom","userChatList","mounted","getData","initData","pageToBottom","methods","res","uni","getSystemInfoSync","windowHeight","upx2px","e","isFirst","q","createSelectorQuery","in","itemH","selectAll","$nextTick","fields","size","i","length","height","exec","arr","isMe","userpic","type","time","len","gstime","gettime","getChatTime","submit","text","now","Date","getTime","obj","push"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoG;AACvC;AACL;;;AAGxD;AAC4H;AAC5H,gBAAgB,0IAAU;AAC1B,EAAE,+EAAM;AACR,EAAE,gGAAM;AACR,EAAE,yGAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEA;AACA,IAAI,KAAU,EAAE,YAiBf;AACD;AACe,gF;;;;;;;;;;;;ACtCf;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACNA;AAAA;AAAA;AAAA;AAA0jB,CAAgB,wlBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwB9kB,oF;;AAEe;AACdA,MADc,kBACP;AACN,WAAO;AACNC,eAAS,EAAE,CADL;AAENC,WAAK,EAAE;AACNC,qBAAa,EAAE,CADT;AAENC,kBAAU,EAAE,CAFN,EAFD;;AAMNC,mBAAa,EAAE,EANT;AAONC,UAAI,EAAE,EAPA,EAAP;;AASA,GAXa;AAYdC,YAAU,EAAE;AACXC,kBAAc,EAAdA,cADW;AAEXC,gBAAY,EAAZA,YAFW,EAZE;;AAgBdC,SAhBc,qBAgBJ;AACT,SAAKC,OAAL;AACA,SAAKC,QAAL;AACA,SAAKC,YAAL,CAAkB,IAAlB;AACA,GApBa;AAqBdC,SAAO,EAAE;AACR;AACAF,YAFQ,sBAEI;AACX,UAAI;AACH,YAAMG,GAAG,GAAGC,GAAG,CAACC,iBAAJ,EAAZ;AACA,aAAKf,KAAL,CAAWC,aAAX,GAA2BY,GAAG,CAACG,YAAJ,GAAmBF,GAAG,CAACG,MAAJ,CAAW,GAAX,CAA9C;AACA,OAHD,CAGE,OAAOC,CAAP,EAAU,CAAE;AACd,KAPO;AAQRP,gBARQ,0BAQuB,sBAAjBQ,OAAiB,uEAAP,KAAO;AAC9B,UAAIC,CAAC,GAAGN,GAAG,CAACO,mBAAJ,GAA0BC,EAA1B,CAA6B,IAA7B,CAAR;AACA,UAAIC,KAAK,GAAGH,CAAC,CAACI,SAAF,CAAY,iBAAZ,CAAZ;AACA,WAAKC,SAAL,CAAe,YAAM;AACpBF,aAAK,CAACG,MAAN,CAAa;AACZC,cAAI,EAAE,IADM,EAAb;AAEG,kBAAA7B,IAAI,EAAI;AACV;AACA,cAAIA,IAAJ,EAAU;AACT,gBAAIqB,OAAJ,EAAa;AACZ,mBAAK,IAAIS,CAAC,GAAG,CAAb,EAAeA,CAAC,GAAG9B,IAAI,CAAC+B,MAAxB,EAAgCD,CAAC,EAAjC,EAAqC;AACpC,qBAAI,CAAC5B,KAAL,CAAWE,UAAX,IAAyBJ,IAAI,CAAC8B,CAAD,CAAJ,CAAQE,MAAjC;AACA;AACD,aAJD,MAIO;AACN,mBAAI,CAAC9B,KAAL,CAAWE,UAAX,IAAyBJ,IAAI,CAACA,IAAI,CAAC+B,MAAL,GAAc,CAAf,CAAJ,CAAsBC,MAA/C;AACA;AACD,iBAAI,CAAC/B,SAAL,GAAkB,KAAI,CAACC,KAAL,CAAWE,UAAX,GAAwB,KAAI,CAACF,KAAL,CAAWC,aAApC,GAAqD,KAAI,CAACD,KAAL,CAAWE,UAAhE,GAA6E,CAA9F;AACA;AACD,SAdD,EAcG6B,IAdH;AAeA,OAhBD;AAiBA,KA5BO;AA6BR;AACAtB,WA9BQ,qBA8BG;AACV,UAAIuB,GAAG,GAAG;AACT;AACCC,YAAI,EAAE,KADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,MAHP;AAICrC,YAAI,EAAE,KAJP;AAKCsC,YAAI,EAAE,UALP,EADS;;AAQT;AACCH,YAAI,EAAE,IADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,KAHP;AAICrC,YAAI,EAAE,kCAJP;AAKCsC,YAAI,EAAE,UALP,EARS;;AAeT;AACCH,YAAI,EAAE,KADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,MAHP;AAICrC,YAAI,EAAE,KAJP;AAKCsC,YAAI,EAAE,UALP,EAfS;;AAsBT;AACCH,YAAI,EAAE,IADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,KAHP;AAICrC,YAAI,EAAE,kCAJP;AAKCsC,YAAI,EAAE,UALP,EAtBS;;AA6BT;AACCH,YAAI,EAAE,KADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,MAHP;AAICrC,YAAI,EAAE,KAJP;AAKCsC,YAAI,EAAE,UALP,EA7BS;;AAoCT;AACCH,YAAI,EAAE,IADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,KAHP;AAICrC,YAAI,EAAE,kCAJP;AAKCsC,YAAI,EAAE,UALP,EApCS;;AA2CT;AACCH,YAAI,EAAE,KADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,MAHP;AAICrC,YAAI,EAAE,KAJP;AAKCsC,YAAI,EAAE,UALP,EA3CS;;AAkDT;AACCH,YAAI,EAAE,IADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,KAHP;AAICrC,YAAI,EAAE,kCAJP;AAKCsC,YAAI,EAAE,UALP,EAlDS;;AAyDT;AACCH,YAAI,EAAE,KADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,MAHP;AAICrC,YAAI,EAAE,KAJP;AAKCsC,YAAI,EAAE,UALP,EAzDS;;AAgET;AACCH,YAAI,EAAE,IADP;AAECC,eAAO,EAAE,kCAFV;AAGCC,YAAI,EAAE,KAHP;AAICrC,YAAI,EAAE,kCAJP;AAKCsC,YAAI,EAAE,UALP,EAhES,CAAV;;;;AAyEA,WAAI,IAAIR,CAAC,GAAC,CAAN,EAAQS,GAAG,GAAGL,GAAG,CAACH,MAAtB,EAA6BD,CAAC,GAACS,GAA/B,EAAmCT,CAAC,EAApC,EAAuC;AACtCI,WAAG,CAACJ,CAAD,CAAH,CAAOU,MAAP,GAAgBF,cAAKG,OAAL,CAAaC,WAAb,CAAyBR,GAAG,CAACJ,CAAD,CAAH,CAAOQ,IAAhC,EAAqCR,CAAC,GAAC,CAAF,GAAMI,GAAG,CAACJ,CAAC,GAAC,CAAH,CAAH,CAASQ,IAAf,GAAsB,CAA3D,CAAhB;AACA;AACD,WAAKhC,IAAL,GAAY4B,GAAZ;AACA,KA5GO;AA6GRS,UA7GQ,kBA6GAC,IA7GA,EA6GM;AACb;AACA,UAAIC,GAAG,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAV;AACA,UAAIC,GAAG,GAAG;AACTb,YAAI,EAAE,IADG;AAETC,eAAO,EAAE,kCAFA;AAGTC,YAAI,EAAE,MAHG;AAITrC,YAAI,EAAE4C,IAJG;AAKTN,YAAI,EAAEO,GALG;AAMTL,cAAM,EAAEF,cAAKG,OAAL,CAAaC,WAAb,CAAyBG,GAAzB,EAA6B,KAAKvC,IAAL,CAAU,KAAKA,IAAL,CAAUyB,MAAV,GAAiB,CAA3B,EAA8BO,IAA3D,CANC,EAAV;;AAQA,WAAKhC,IAAL,CAAU2C,IAAV,CAAeD,GAAf;AACA,WAAKrB,SAAL,CAAe,YAAU;AACxB,aAAKd,YAAL;AACA,OAFD;AAGA,KA5HO,EArBK,E","file":"pages/user-chat/user-chat.js","sourcesContent":["import { render, staticRenderFns } from \"./user-chat.vue?vue&type=template&id=baf8cc18&scoped=true&\"\nimport script from \"./user-chat.vue?vue&type=script&lang=js&\"\nexport * from \"./user-chat.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"baf8cc18\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('baf8cc18', component.options)\n    } else {\n      api.reload('baf8cc18', component.options)\n    }\n    module.hot.accept(\"./user-chat.vue?vue&type=template&id=baf8cc18&scoped=true&\", function () {\n      api.rerender('baf8cc18', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/code/uni-app/嗅事app/pages/user-chat/user-chat.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=template&id=baf8cc18&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./user-chat.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport userChatBottom from '@/components/user-chat/user-chat-bottom.vue'\r\nimport userChatList from '@/components/user-chat/user-chat-list.vue'\r\nimport time from '@/common/time.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tscrollTop: 0,\r\n\t\t\tstyle: {\r\n\t\t\t\tcontentHeight: 0,\r\n\t\t\t\titemHeight: 0\r\n\t\t\t},\r\n\t\t\tchildElements: [],\r\n\t\t\tlist: [],\r\n\t\t};\r\n\t},\r\n\tcomponents: {\r\n\t\tuserChatBottom,\r\n\t\tuserChatList\r\n\t},\r\n\tmounted() {\r\n\t\tthis.getData()\r\n\t\tthis.initData()\r\n\t\tthis.pageToBottom(true)\r\n\t},\r\n\tmethods: {\r\n\t\t// 初始化参数\r\n\t\tinitData () {\r\n\t\t\ttry {\r\n\t\t\t\tconst res = uni.getSystemInfoSync();\r\n\t\t\t\tthis.style.contentHeight = res.windowHeight - uni.upx2px(120)\r\n\t\t\t} catch (e) {}\r\n\t\t},\r\n\t\tpageToBottom (isFirst = false) {\r\n\t\t\tlet q = uni.createSelectorQuery().in(this);\r\n\t\t\tlet itemH = q.selectAll('.user-chat-item');\r\n\t\t\tthis.$nextTick(() => {\r\n\t\t\t\titemH.fields({\r\n\t\t\t\t\tsize: true\r\n\t\t\t\t}, data => {\r\n\t\t\t\t\t// console.log(JSON.stringify(data));\r\n\t\t\t\t\tif (data) {\r\n\t\t\t\t\t\tif (isFirst) {\r\n\t\t\t\t\t\t\tfor (let i = 0;i < data.length; i++) {\r\n\t\t\t\t\t\t\t\tthis.style.itemHeight += data[i].height\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.style.itemHeight += data[data.length - 1].height\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.scrollTop = (this.style.itemHeight > this.style.contentHeight) ? this.style.itemHeight : 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}).exec();\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 获取聊天数据\r\n\t\tgetData () {\r\n\t\t\tlet arr = [\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: false,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tdata: '啦啦啦',\r\n\t\t\t\t\ttime: 1565161994\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: true,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/20.jpg',\r\n\t\t\t\t\ttype: 'img',\r\n\t\t\t\t\tdata: '../../static/demo/datapic/29.jpg',\r\n\t\t\t\t\ttime: 1565162000\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: false,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tdata: '啦啦啦',\r\n\t\t\t\t\ttime: 1565161994\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: true,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/20.jpg',\r\n\t\t\t\t\ttype: 'img',\r\n\t\t\t\t\tdata: '../../static/demo/datapic/29.jpg',\r\n\t\t\t\t\ttime: 1565162000\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: false,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tdata: '啦啦啦',\r\n\t\t\t\t\ttime: 1565161994\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: true,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/20.jpg',\r\n\t\t\t\t\ttype: 'img',\r\n\t\t\t\t\tdata: '../../static/demo/datapic/29.jpg',\r\n\t\t\t\t\ttime: 1565162000\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: false,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tdata: '啦啦啦',\r\n\t\t\t\t\ttime: 1565161994\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: true,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/20.jpg',\r\n\t\t\t\t\ttype: 'img',\r\n\t\t\t\t\tdata: '../../static/demo/datapic/29.jpg',\r\n\t\t\t\t\ttime: 1565162000\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: false,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\tdata: '啦啦啦',\r\n\t\t\t\t\ttime: 1565161994\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tisMe: true,\r\n\t\t\t\t\tuserpic: '../../static/demo/userpic/20.jpg',\r\n\t\t\t\t\ttype: 'img',\r\n\t\t\t\t\tdata: '../../static/demo/datapic/29.jpg',\r\n\t\t\t\t\ttime: 1565162000\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t\t\r\n\t\t\tfor(let i=0,len = arr.length;i<len;i++){\r\n\t\t\t\tarr[i].gstime = time.gettime.getChatTime(arr[i].time,i>0 ? arr[i-1].time : 0)\r\n\t\t\t}\r\n\t\t\tthis.list = arr\r\n\t\t},\r\n\t\tsubmit (text) {\r\n\t\t\t// 构建数据\r\n\t\t\tlet now = new Date().getTime()\r\n\t\t\tlet obj = {\r\n\t\t\t\tisMe: true,\r\n\t\t\t\tuserpic: '../../static/demo/userpic/19.jpg',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdata: text,\r\n\t\t\t\ttime: now,\r\n\t\t\t\tgstime: time.gettime.getChatTime(now,this.list[this.list.length-1].time),\r\n\t\t\t}\r\n\t\t\tthis.list.push(obj)\r\n\t\t\tthis.$nextTick(function(){\r\n\t\t\t\tthis.pageToBottom()\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n"],"sourceRoot":""}