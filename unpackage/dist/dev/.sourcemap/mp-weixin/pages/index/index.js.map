{"version":3,"sources":["webpack:///D:/code/uni-app/嗅事app/pages/index/index.vue?7359","webpack:///D:/code/uni-app/嗅事app/pages/index/index.vue?e9e3","webpack:///D:/code/uni-app/嗅事app/pages/index/index.vue?51a2","webpack:///D:/code/uni-app/嗅事app/pages/index/index.vue?63d6","webpack:///D:/code/uni-app/嗅事app/pages/index/index.vue"],"names":["data","swiperHeight","tabIndex","tabBars","newsList","components","indexList","swiperTabHead","loadMore","noThing","onLoad","_self","uni","getSystemInfo","success","res","sHeight","windowHeight","upx2px","fail","e","showToast","title","getNav","$on","updateData","onNavigationBarSearchInputClicked","navigateTo","url","onNavigationBarButtonTap","index","methods","fixIndex","tabChange","sIndex","detail","current","getList","type","updateGuanZhu","updateSupport","updateList","updateComment","obj","list","find","value","id","post_id","commentnum","forEach","item","userid","isguanzhu","oldindex","infonum","do","dingnum","cainum","findIndex","val","post_class_id","push","__format","loadtext","page","$http","get","err","errorCheck","arr","arr2","i","length","name","classname","firstload","currentIndex","token","error","concat","user","userpic","username","fens","titlepic","video","path","share","support","ding_count","cai_count","comment_count","sharenum"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=caec2438&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"caec2438\",\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('caec2438', component.options)\n    } else {\n      api.reload('caec2438', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=caec2438&scoped=true&\", function () {\n      api.rerender('caec2438', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/code/uni-app/嗅事app/pages/index/index.vue\"\nexport default component.exports","export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=caec2438&scoped=true&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nimport indexList from '@/components/index/index-list.vue'\r\nimport swiperTabHead from '@/components/index/swiper-tab-head.vue'\r\nimport loadMore from '@/components/common/load-more.vue'\r\nimport noThing from '@/components/common/no-thing.vue'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tswiperHeight: 0,\r\n\t\t\ttabIndex: 0,\r\n\t\t\ttabBars: [],\r\n\t\t\tnewsList: []\r\n\t\t}\r\n\t},\r\n\tcomponents:{\r\n\t\tindexList,\r\n\t\tswiperTabHead,\r\n\t\tloadMore,\r\n\t\tnoThing\r\n\t},\r\n\tonLoad() {\r\n\t\tconst _self = this\r\n\t\tuni.getSystemInfo({\r\n\t\t\tsuccess(res) {\r\n\t\t\t\tlet sHeight = res.windowHeight - uni.upx2px(100)\r\n\t\t\t\t_self.swiperHeight = sHeight\r\n\t\t\t},\r\n\t\t\tfail(e) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '获取手机设备信息失败'\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t})\r\n\t\tthis.getNav();\r\n\t\t// 开启监听\r\n\t\tuni.$on('updateData',this.updateData);\r\n\t},\r\n\t// 监听搜索框点击事件\r\n\tonNavigationBarSearchInputClicked () {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: '../search/search'\r\n\t\t})\r\n\t},\r\n\tonNavigationBarButtonTap (e) {\r\n\t\t// console.log(JSON.stringify(e.index));\r\n\t\tswitch (e.index){\r\n\t\t\tcase 1:\r\n\t\t\t\t// 打开发布页面\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '../add-input/add-input'\r\n\t\t\t\t})\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tfixIndex (index) {\r\n\t\t\tthis.tabIndex = index\r\n\t\t},\r\n\t\ttabChange (e) {\r\n\t\t\tlet sIndex = e.detail.current\r\n\t\t\tthis.tabIndex = sIndex\r\n\t\t\tthis.getList();\r\n\t\t},\r\n\t\t// 关注\r\n\t\tupdateData (data) {\r\n\t\t\tswitch (data.type){\r\n\t\t\t\tcase \"guanzhu\":\r\n\t\t\t\tthis.updateGuanZhu(data);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"support\":\r\n\t\t\t\tthis.updateSupport(data);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"updateList\":\r\n\t\t\t\tthis.updateList(data);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'updateComment':\r\n\t\t\t\tthis.updateComment(data);\r\n\t\t\t\t\tbreak; \r\n\t\t\t}\r\n\t\t},\r\n\t\t// 更新评论数\r\n\t\tupdateComment(data){\r\n\t\t\t// 拿到当前对象\r\n\t\t\tlet obj = this.newsList[this.tabIndex].list.find(value =>{\r\n\t\t\t\treturn value.id === data.post_id;\r\n\t\t\t});\r\n\t\t\tif (!obj) return;\r\n\t\t\tobj.commentnum++; // 评论数+1\r\n\t\t},\r\n\t\t// 更新关注信息\r\n\t\tupdateGuanZhu(data){\r\n\t\t\tthis.newsList[this.tabIndex].list.forEach((item,index)=>{\r\n\t\t\t\tif (item.userid === data.userid) {\r\n\t\t\t\t\titem.isguanzhu = data.data;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t},\r\n\t\t// 更新顶踩数据状态\r\n\t\tupdateSupport(data){\r\n\t\t\t// 拿到当前对象\r\n\t\t\tlet obj = this.newsList[this.tabIndex].list.find(value =>{\r\n\t\t\t\treturn value.id === data.post_id;\r\n\t\t\t});\r\n\t\t\tif (!obj) return;\r\n\t\t\tlet oldindex = obj.infonum.index; // 操作前的状态\r\n\t\t\tobj.infonum.index = (data.do == 'smile') ? 1 : 2; // 操作后的状态\r\n\t\t\tif (oldindex !== 0) { //之前操作过\r\n\t\t\t\toldindex == 1 ? obj.infonum.dingnum-- : obj.infonum.cainum--;\r\n\t\t\t}\r\n\t\t\tif (obj.infonum.index !== 0) {  // 当前操作\r\n\t\t\t\tobj.infonum.index == 1 \r\n\t\t\t\t\t? obj.infonum.dingnum++ : obj.infonum.cainum++;\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 更新用户发布信息\r\n\t\tupdateList(data){\r\n\t\t\t// 第一种，直接追加\r\n\t\t\tlet index = this.tabBars.findIndex((val)=>{\r\n\t\t\t\treturn val.id === data.post_class_id;\r\n\t\t\t})\r\n\t\t\tif (index > -1) {\r\n\t\t\t\tthis.newsList[index].list.push(this.__format(data));\r\n\t\t\t}\r\n\t\t\t// 第二种，重新加载当前post_class_id信息\r\n\t\t},\r\n\t\t// 上拉加载\r\n\t\tloadMore (index) {\r\n\t\t\t// console.log(this.newsList[index].loadtext);\r\n\t\t\tif (this.newsList[index].loadtext != '上拉加载更多...') return;\r\n\t\t\t// 修改状态\r\n\t\t\tthis.newsList[index].loadtext = '加载中...'\r\n\t\t\t// 获取数据\r\n\t\t\tthis.newsList[this.tabIndex].page++;\r\n\t\t\tthis.getList(); \r\n\t\t},\r\n\t\t// 获取文章分类 \r\n\t\tasync getNav () {\r\n\t\t\tlet [err,res] = await this.$http.get('/postclass')\r\n\t\t\t// if (err) return uni.showToast({ title: '加载失败', icon: 'none' })\r\n\t\t\t// if (res.data.errorCode) return uni.showToast({ title: res.data.msg, icon: 'none' })\r\n\t\t\tif (!this.$http.errorCheck(err,res)) return;\r\n\t\t\t\r\n\t\t\tlet list = res.data.data.list;\r\n\t\t\tlet arr = [];\r\n\t\t\tlet arr2 = [];\r\n\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\tarr.push({\r\n\t\t\t\t\tid: list[i].id,\r\n\t\t\t\t\tname: list[i].classname\r\n\t\t\t\t})\r\n\t\t\t\tarr2.push({\r\n\t\t\t\t\tloadtext: '上拉加载更多....',\r\n\t\t\t\t\tlist: [],\r\n\t\t\t\t\tpage: 1,\r\n\t\t\t\t\tfirstload: false\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.tabBars = arr;\r\n\t\t\tthis.newsList = arr2;\r\n\t\t\tthis.tabBars.length > 0 && this.getList();\r\n\t\t},\r\n\t\t// 获取指定列表\r\n\t\tasync getList(){\r\n\t\t\tlet currentIndex = this.tabIndex;\r\n\t\t\t\r\n\t\t\tlet url = `/postclass/${this.tabBars[this.tabIndex].id}/post/${this.newsList[this.tabIndex].page}`;\r\n\t\t\tlet [err,res] = await this.$http.get(url,{},{token:true});\r\n\t\t\t\r\n\t\t\tlet error = this.$http.errorCheck(err,res,()=>{\r\n\t\t\t\tthis.newsList[currentIndex].loadtext=\"上拉加载更多...\";\r\n\t\t\t},()=>{\r\n\t\t\t\tthis.newsList[currentIndex].loadtext=\"上拉加载更多...\";\r\n\t\t\t});\r\n\t\t\tif (!error) return;\r\n\t\t\t\r\n\t\t\tlet arr = [];\r\n\t\t\tlet list = res.data.data.list;\r\n\t\t\tfor (let i = 0; i < list.length; i++) {\r\n\t\t\t\tarr.push(this.__format(list[i]));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.newsList[currentIndex].list = this.newsList[currentIndex].page > 1 ? this.newsList[currentIndex].list.concat(arr) : arr;\r\n\t\t\tthis.newsList[currentIndex].firstload = true;\r\n\t\t\t\r\n\t\t\tif (list.length < 10) {\r\n\t\t\t\tthis.newsList[currentIndex].loadtext=\"我是有底线的...\";\r\n\t\t\t}else{\r\n\t\t\t\tthis.newsList[currentIndex].loadtext=\"上拉加载更多...\";\r\n\t\t\t}\r\n\t\t\t// console.log(JSON.stringify(this.newsList[currentIndex]));\r\n\t\t\treturn;\r\n\t\t},\r\n\t\t// 格式转化\r\n\t\t__format(item){\r\n\t\t\treturn {\r\n\t\t\t\tuserid:item.user.id,\r\n\t\t\t\tuserpic:item.user.userpic,\r\n\t\t\t\tusername:item.user.username,\r\n\t\t\t\tisguanzhu: !!item.user.fens.length,\r\n\t\t\t\tid:item.id,\r\n\t\t\t\ttitle:item.title,\r\n\t\t\t\ttype:\"img\", // img:图文,video:视频\r\n\t\t\t\ttitlepic:item.titlepic,\r\n\t\t\t\tvideo:false,\r\n\t\t\t\tpath:item.path,\r\n\t\t\t\tshare:!!item.share,\r\n\t\t\t\tinfonum:{\r\n\t\t\t\t\tindex:(item.support.length>0) ? (item.support[0].type+1) : 0,//0:没有操作，1:顶,2:踩；\r\n\t\t\t\t\tdingnum:item.ding_count,\r\n\t\t\t\t\tcainum:item.cai_count,\r\n\t\t\t\t},\r\n\t\t\t\tcommentnum:item.comment_count,\r\n\t\t\t\tsharenum:item.sharenum,\r\n\t\t\t}\r\n\t\t},\r\n\t}\r\n}\r\n"],"sourceRoot":""}